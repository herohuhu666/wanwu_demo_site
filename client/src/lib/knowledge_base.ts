import { HexagramData } from './types';

export const HEXAGRAM_KNOWLEDGE_BASE: Record<number, HexagramData> = {
  1: {
    id: 1,
    name: "乾",
    nature: "天行健",
    judgment: "自强不息，万物资始。",
    status: "吉",
    advice: {
      ji: "势如破竹，宜乘势而上，但需持正。",
      ping: "积蓄力量，待时而动。",
      shen: "刚过易折，亢龙有悔，宜退守自省."
    },
    recommendations: ["制定长远计划", "主动承担责任", "坚持锻炼"],
    taboos: ["傲慢自大", "急于求成"],
    action: "今日宜晨跑或进行高强度专注工作。",
    element: "metal",
    image: "天行健，君子以自强不息。",
    keywords: ["刚健", "创造", "领袖"],
    lines: [
      "初九：潜龙勿用。时机未到，宜隐忍待发。",
      "九二：见龙在田，利见大人。崭露头角，宜寻贵人。",
      "九三：君子终日乾乾，夕惕若厉，无咎。勤勉谨慎，可保平安。",
      "九四：或跃在渊，无咎。进退自如，把握时机。",
      "九五：飞龙在天，利见大人。如日中天，大展宏图。",
      "上九：亢龙有悔。盛极而衰，知进退。"
    ]
  },
  2: {
    id: 2,
    name: "坤",
    nature: "地势坤",
    judgment: "厚德载物，顺势而为。",
    status: "吉",
    advice: {
      ji: "包容万物，顺应时势，必有后福。",
      ping: "安分守己，静待花开。",
      shen: "迷失方向，宜寻良师益友指引。"
    },
    recommendations: ["包容他人过失", "整理家居环境", "静坐冥想"],
    taboos: ["争强好胜", "独断专行"],
    action: "今日宜整理房间或倾听他人诉说。",
    element: "earth",
    image: "地势坤，君子以厚德载物。",
    keywords: ["柔顺", "包容", "承载"],
    lines: [
      "初六：履霜，坚冰至。见微知著，防微杜渐。",
      "六二：直方大，不习无不利。正直方正，顺其自然。",
      "六三：含章可贞。才华内敛，不露锋芒。",
      "六四：括囊，无咎无誉。谨言慎行，明哲保身。",
      "六五：黄裳，元吉。中正柔顺，大吉大利。",
      "上六：龙战于野，其血玄黄。阴阳相争，两败俱伤。"
    ]
  },
  3: {
    id: 3,
    name: "屯",
    nature: "云雷屯",
    judgment: "万事起头难，生机在险中。",
    status: "慎",
    advice: {
      ji: "虽有困难，但生机勃勃，宜建基立业。",
      ping: "进退两难，宜稳扎稳打。",
      shen: "草率行事必致败，宜按兵不动。"
    },
    recommendations: ["规划基础", "寻求援助"],
    taboos: ["轻举妄动", "放弃初衷"],
    action: "今日宜列出待办清单，逐一攻克。",
    element: "water",
    image: "云雷屯，君子以经纶。",
    keywords: ["艰难", "新生", "积聚"],
    lines: [
      "初九：磐桓，利居贞，利建侯。万事开头难，宜立定脚跟。",
      "六二：屯如邅如，乘马班如。进退两难，宜待时而动。",
      "六三：即鹿无虞，惟入于林中。盲目追求，徒劳无功。",
      "六四：乘马班如，求婚媾。寻求合作，共渡难关。",
      "九五：屯其膏，小贞吉，大贞凶。恩泽未施，宜从小事做起。",
      "上六：乘马班如，泣血涟如。孤立无援，穷途末路。"
    ]
  },
  4: {
    id: 4,
    name: "蒙",
    nature: "山水蒙",
    judgment: "蒙以养正，启蒙智慧。",
    status: "平",
    advice: {
      ji: "虚心求教，智慧开启。",
      ping: "混沌未开，宜静心学习。",
      shen: "愚昧不明，切忌自作聪明。"
    },
    recommendations: ["阅读经典", "请教长辈"],
    taboos: ["不懂装懂", "好为人师"],
    action: "今日宜阅读一本好书的章节。",
    element: "water",
    image: "山下出泉，蒙；君子以果行育德。",
    keywords: ["启蒙", "教育", "智慧"],
    lines: [
      "初六：发蒙，利用刑人，用说桎梏。启蒙之初，宜严加管教。",
      "九二：包蒙吉，纳妇吉，子克家。包容愚昧，因材施教。",
      "六三：勿用取女，见金夫，不有躬，无攸利。切忌见利忘义。",
      "六四：困蒙，吝。困于愚昧，孤陋寡闻。",
      "六五：童蒙，吉。保持童心，虚心求教。",
      "上九：击蒙，不利为寇，利御寇。严厉惩戒，以正视听。"
    ]
  },
  5: {
    id: 5,
    name: "需",
    nature: "水天需",
    judgment: "饮食宴乐，待时而动。",
    status: "平",
    advice: {
      ji: "时机未到，宜养精蓄锐。",
      ping: "耐心等待，终有收获。",
      shen: "急躁冒进，恐陷险境。"
    },
    recommendations: ["享受美食", "耐心等待"],
    taboos: ["冒险涉水", "急躁焦虑"],
    action: "今日宜好好吃一顿饭，细嚼慢咽。",
    element: "water",
    image: "云上于天，需；君子以饮食宴乐。",
    keywords: ["等待", "积蓄", "时机"],
    lines: [
      "初九：需于郊，利用恒，无咎。在郊外等待，保持耐心。",
      "九二：需于沙，小有言，终吉。在沙滩等待，虽有口舌，终吉。",
      "九三：需于泥，致寇至。在泥沼等待，招致灾祸。",
      "六四：需于血，出自穴。在血泊中等待，九死一生。",
      "九五：需于酒食，贞吉。在酒食中等待，安然自得。",
      "上六：入于穴，有不速之客三人来，敬之终吉。意外之客，以礼相待。"
    ]
  },
  6: {
    id: 6,
    name: "讼",
    nature: "天水讼",
    judgment: "慎争戒讼，退一步海阔天空。",
    status: "慎",
    advice: {
      ji: "据理力争，但需适可而止。",
      ping: "有分歧，宜沟通化解。",
      shen: "争执不利，宜退让求和。"
    },
    recommendations: ["沟通调解", "反思己过"],
    taboos: ["意气用事", "挑起争端"],
    action: "今日宜避免口舌之争，多做倾听。",
    element: "metal",
    image: "天与水违行，讼；君子以作事谋始。",
    keywords: ["争执", "诉讼", "慎始"],
    lines: [
      "初六：不永所事，小有言，终吉。不把事情闹大，虽有口舌，终吉。",
      "九二：不克讼，归而逋，其邑人三百户，无眚。争讼失败，逃跑避祸。",
      "六三：食旧德，贞厉，终吉。安守本分，虽有危险，终吉。",
      "九四：不克讼，复即命，渝安贞，吉。争讼失败，回头是岸。",
      "九五：讼，元吉。公正裁决，大吉大利。",
      "上九：或锡之鞶带，终朝三褫之。虽获殊荣，终必失去。"
    ]
  },
  7: {
    id: 7,
    name: "师",
    nature: "地水师",
    judgment: "行险而顺，容民畜众。",
    status: "吉",
    advice: {
      ji: "统领众人，出师有名。",
      ping: "纪律严明，方能成事。",
      shen: "众叛亲离，宜整顿内部。"
    },
    recommendations: ["团队协作", "制定规则"],
    taboos: ["一意孤行", "散漫无纪"],
    action: "今日宜组织团队会议或制定个人纪律。",
    element: "water",
    image: "地中有水，师；君子以容民畜众。",
    keywords: ["军队", "纪律", "统领"],
    lines: [
      "初六：师出以律，否臧凶。出师必须有纪律，否则凶险。",
      "九二：在师中，吉无咎，王三锡命。身在军中，受君王赏识。",
      "六三：师或舆尸，凶。军队载尸而归，大败。",
      "六四：师左次，无咎。军队驻扎左边，无咎。",
      "六五：田有禽，利执言，无咎。田猎有获，利于进言。",
      "上六：大君有命，开国承家，小人勿用。论功行赏，不可重用小人。"
    ]
  },
  8: {
    id: 8,
    name: "比",
    nature: "水地比",
    judgment: "亲密比辅，众星捧月。",
    status: "吉",
    advice: {
      ji: "贵人相助，朋友云集。",
      ping: "真诚待人，可获友谊。",
      shen: "迟疑不决，错失良机。"
    },
    recommendations: ["结交新友", "联络旧识"],
    taboos: ["孤僻冷漠", "迟疑不决"],
    action: "今日宜主动联系一位许久未见的朋友。",
    element: "water",
    image: "地上有水，比；先王以建万国，亲诸侯。",
    keywords: ["亲密", "辅佐", "团结"],
    lines: [
      "初六：有孚比之，无咎。有孚盈缶，终来有它吉。诚信待人，无咎。",
      "六二：比之自内，贞吉。发自内心的亲密，吉利。",
      "六三：比之匪人。与不正派的人亲密，凶。",
      "六四：外比之，贞吉。与外部贤人亲密，吉利。",
      "九五：显比，王用三驱，失前禽，邑人不诫，吉。光明正大的亲密，吉利。",
      "上六：比之无首，凶。亲密无头绪，凶。"
    ]
  },
  9: {
    id: 9,
    name: "小畜",
    nature: "风天小畜",
    judgment: "密云不雨，积蓄力量。",
    status: "平",
    advice: {
      ji: "小有积蓄，宜稳步前行。",
      ping: "时机未成熟，宜继续积累。",
      shen: "力量不足，强行必败。"
    },
    recommendations: ["储蓄理财", "修饰仪表"],
    taboos: ["大兴土木", "远行涉险"],
    action: "今日宜存下一笔小钱或整理仪容。",
    element: "wood",
    image: "风行天上，小畜；君子以懿文德。",
    keywords: ["积蓄", "微小", "阻碍"],
    lines: [
      "初九：复自道，何其咎，吉。回到正道，吉利。",
      "九二：牵复，吉。被牵引回来，吉利。",
      "九三：舆说辐，夫妻反目。车轮脱落，夫妻反目。",
      "六四：有孚，血去惕出，无咎。诚信待人，免除灾祸。",
      "九五：有孚挛如，富以其邻。诚信合作，共同富裕。",
      "上九：既雨既处，尚德载，妇贞厉。月几望，君子征凶。积蓄已满，宜适可而止。"
    ]
  },
  10: {
    id: 10,
    name: "履",
    nature: "天泽履",
    judgment: "如履薄冰，小心行事。",
    status: "慎",
    advice: {
      ji: "虽有惊险，但小心可保平安。",
      ping: "循规蹈矩，无咎。",
      shen: "踩踏虎尾，必有灾咎。"
    },
    recommendations: ["谨言慎行", "遵守礼仪"],
    taboos: ["狂妄自大", "逾越规矩"],
    action: "今日宜注意言行举止，对人有礼。",
    element: "metal",
    image: "上天下泽，履；君子以辨上下，定民志。",
    keywords: ["践履", "礼仪", "小心"],
    lines: [
      "初九：素履，往无咎。朴素践行，无咎。",
      "九二：履道坦坦，幽人贞吉。行走在平坦大道，吉利。",
      "六三：眇能视，跛能履，履虎尾，咥人，凶。武人为于大君。自不量力，凶。",
      "九四：履虎尾，愬愬，终吉。小心翼翼，终吉。",
      "九五：夬履，贞厉。果断践行，虽有危险，终吉。",
      "上九：视履考祥，其旋元吉。回顾所行，大吉大利。"
    ]
  },
  11: {
    id: 11,
    name: "泰",
    nature: "地天泰",
    judgment: "小往大来，吉亨。",
    status: "吉",
    advice: {
      ji: "天地交泰，万事顺遂。",
      ping: "阴阳调和，安居乐业。",
      shen: "泰极否来，宜居安思危。"
    },
    recommendations: ["开展新计划", "与人合作"],
    taboos: ["骄奢淫逸", "懈怠懒惰"],
    action: "今日宜启动一项重要的计划。",
    element: "earth",
    image: "天地交，泰；后以财成天地之道，辅相天地之宜，以左右民。",
    keywords: ["通达", "安泰", "和谐"],
    lines: [
      "初九：拔茅茹，以其汇，征吉。拔茅连根，吉利。",
      "九二：包荒，用冯河，不遐遗，朋亡，得尚于中行。包容荒秽，果断行事。",
      "九三：无平不陂，无往不复，艰贞无咎。勿恤其孚，于食有福。世事无常，坚守正道。",
      "六四：翩翩，不富以其邻，不戒以孚。翩翩起舞，与邻同乐。",
      "六五：帝乙归妹，以祉元吉。帝乙嫁妹，大吉大利。",
      "上六：城复于隍，勿用师。自邑告命，贞吝。城墙倒塌，不可出师。"
    ]
  },
  12: {
    id: 12,
    name: "否",
    nature: "天地否",
    judgment: "大往小来，不利君子贞。",
    status: "慎",
    advice: {
      ji: "虽处逆境，但能独善其身。",
      ping: "闭塞不通，宜韬光养晦。",
      shen: "小人当道，宜退避三舍。"
    },
    recommendations: ["独处自省", "保守秘密"],
    taboos: ["强出头", "轻信他人"],
    action: "今日宜独处一小时，进行深度思考。",
    element: "metal",
    image: "天地不交，否；君子以俭德辟难，不可荣以禄。",
    keywords: ["闭塞", "阻隔", "小人"],
    lines: [
      "初六：拔茅茹，以其汇，贞吉亨。拔茅连根，吉利。",
      "六二：包承，小人吉，大人否亨。包容承载，小人吉，大人否。",
      "六三：包羞。包容羞耻。",
      "九四：有命无咎，修丽祉。奉命行事，无咎。",
      "九五：休否，大人吉。其亡其亡，系于苞桑。休止闭塞，大人吉。",
      "上九：倾否，先否后喜。倾覆闭塞，先苦后甜。"
    ]
  },
  13: {
    id: 13,
    name: "同人",
    nature: "天火同人",
    judgment: "二人同心，其利断金。",
    status: "吉",
    advice: {
      ji: "志同道合，大有可为。",
      ping: "求同存异，和谐共处。",
      shen: "貌合神离，宜辨明真伪。"
    },
    recommendations: ["团队建设", "公开演讲"],
    taboos: ["结党营私", "排斥异己"],
    action: "今日宜与同事或伙伴共进午餐。",
    element: "fire",
    image: "天与火，同人；君子以类族辨物。",
    keywords: ["同心", "协作", "光明"],
    lines: [
      "初九：同人于门，无咎。在门外与人交往，无咎。",
      "六二：同人于宗，吝。只与宗族交往，吝惜。",
      "九三：伏戎于莽，升其高陵，三岁不兴。埋伏军队，三年不敢兴兵。",
      "九四：乘其墉，弗克攻，吉。登上城墙，不攻打，吉利。",
      "九五：同人，先号后笑。大师克相遇。先号啕大哭，后欢笑。",
      "上九：同人于郊，无悔。在郊外与人交往，无悔。"
    ]
  },
  14: {
    id: 14,
    name: "大有",
    nature: "火天大有",
    judgment: "火在天上，顺天依时。",
    status: "吉",
    advice: {
      ji: "如日中天，收获颇丰。",
      ping: "富有且仁，宜广结善缘。",
      shen: "满招损，宜谦虚谨慎。"
    },
    recommendations: ["布施公益", "分享成果"],
    taboos: ["挥霍无度", "炫耀财富"],
    action: "今日宜做一件利他的小事。",
    element: "fire",
    image: "火在天上，大有；君子以遏恶扬善，顺天休命。",
    keywords: ["富有", "盛大", "顺天"],
    lines: [
      "初九：无交害，匪咎，艰则无咎。无交往之害，无咎。",
      "九二：大车以载，有攸往，无咎。大车装载，有所往，无咎。",
      "九三：公用亨于天子，小人弗克。公侯受天子宴请，小人不能。",
      "九四：匪其彭，无咎。不依仗盛大，无咎。",
      "六五：厥孚交如，威如，吉。诚信交往，威严，吉利。",
      "上九：自天佑之，吉无不利。上天保佑，大吉大利。"
    ]
  },
  15: {
    id: 15,
    name: "谦",
    nature: "地山谦",
    judgment: "谦谦君子，卑以自牧。",
    status: "吉",
    advice: {
      ji: "谦虚受益，万事亨通。",
      ping: "低调行事，可保平安。",
      shen: "过分谦虚，反成虚伪。"
    },
    recommendations: ["虚心纳谏", "退让一步"],
    taboos: ["骄傲自满", "争功抢利"],
    action: "今日宜赞美他人，隐藏自己的功劳。",
    element: "earth",
    image: "地中有山，谦；君子以裒多益寡，称物平施。",
    keywords: ["谦虚", "低调", "受益"],
    lines: [
      "初六：谦谦君子，用涉大川，吉。谦虚的君子，涉越大河，吉利。",
      "六二：鸣谦，贞吉。名声谦虚，吉利。",
      "九三：劳谦君子，有终吉。勤劳谦虚的君子，终吉。",
      "六四：无不利，撝谦。无不利，发挥谦虚。",
      "六五：不富以其邻，利用侵伐，无不利。不富裕，利用侵伐，无不利。",
      "上六：鸣谦，利用行师，征邑国。名声谦虚，利用行师，征伐邑国。"
    ]
  },
  16: {
    id: 16,
    name: "豫",
    nature: "雷地豫",
    judgment: "雷出地奋，利建侯行师。",
    status: "吉",
    advice: {
      ji: "顺势而动，快乐安适。",
      ping: "未雨绸缪，居安思危。",
      shen: "沉溺享乐，乐极生悲。"
    },
    recommendations: ["规划未来", "适度娱乐"],
    taboos: ["玩物丧志", "懈怠工作"],
    action: "今日宜听一首欢快的音乐，放松心情。",
    element: "wood",
    image: "雷出地奋，豫；先王以作乐崇德，殷荐之上帝，以配祖考。",
    keywords: ["快乐", "安适", "顺势"],
    lines: [
      "初六：鸣豫，凶。自鸣得意，凶。",
      "六二：介于石，不终日，贞吉。坚如磐石，不终日，吉利。",
      "六三：盱豫，悔。迟疑不决，后悔。",
      "九四：由豫，大有得。勿疑，朋盍簪。由此快乐，大有收获。",
      "六五：贞疾，恒不死。坚守正道，虽有病，不死。",
      "上六：冥豫，成有变，无咎。沉溺快乐，终有变，无咎。"
    ]
  }
};

// Binary string to Hexagram ID mapping
// Binary is bottom-to-top, 0=Yin, 1=Yang
const BINARY_MAP: Record<string, number> = {
  "111111": 1, // Qian
  "000000": 2, // Kun
  "100010": 3, // Tun
  "010001": 4, // Meng
  "111010": 5, // Xu
  "010111": 6, // Song
  "010000": 7, // Shi
  "000010": 8, // Bi
  "111011": 9, // Xiao Chu
  "110111": 10, // Lv
  "111000": 11, // Tai
  "000111": 12, // Pi
  "101111": 13, // Tong Ren
  "111101": 14, // Da You
  "001000": 15, // Qian
  "000100": 16, // Yu
};

// Helper to get hexagram data safely
export const getHexagram = (input: number | string): HexagramData => {
  let id = 1;
  
  if (typeof input === 'string') {
    id = BINARY_MAP[input] || (parseInt(input, 2) % 16) + 1;
  } else {
    id = input;
  }

  // Fallback to 1 if id is out of range or not implemented
  return HEXAGRAM_KNOWLEDGE_BASE[id] || HEXAGRAM_KNOWLEDGE_BASE[1];
};
